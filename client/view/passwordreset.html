<!doctype html>
<html lang="en">
<script src="js/jquery.min.js"></script>
<link rel="stylesheet" href="css/bootstrap.min.css" />
<script src="js/bootstrap.min.js"></script>
 <link rel="stylesheet" type="text/css" href="css/headerstyle.css">
<script>
    /*global $*/
    function handleResetAttempt() {
        var email = $('#email').val();
        var password = $('#password').val();

        var repeatPassword = $('#repeat_password').val();
        if (email.length > 0 && password.length > 0 && repeatPassword.length > 0 && password == repeatPassword) {
            Promise.resolve()
                .then(function() {
                    return $.post('passwordreset', { email: email, password: password });
                })
                .then(function(data) {
                    $('#error').html('go check your email, dummy');
                })
                .catch(function(err) {
                    console.log(err);
                });
        }
        else {
            alert('Please provide both username and password and ensure passwords match');
            console.log('error');
        }
    }
</script>
</head>

<!-- add the onload event handler to the body tag-->

<body background="img/background_insta.jpg">
    <div class="centerContainer">
        <div class="row">
            <div class="col-sm-6 col-sm-offset-3">
                <h3>Reset Password</h3>

                <div class="form-group">
                    <input id="email" type="text" name="email" class="form-control" placeholder="Email" required autofocus/>
                </div>

                <div class="form-group">
                    <input id="password" type="password" name="password" class="form-control" placeholder="Password" required/>
                </div>

                <div class="form-group">
                    <input id="repeat_password" type="password" class="form-control" placeholder="Password">
                </div>
                
                <div class="form-group">
                    <button class="btn btn-lg btn-primary btn-block" onclick="handleResetAttempt()">Reset Password</button>
                </div>
                <p id="error"></p>
            </div>
        </div>
    </div>
</body>
</html>
